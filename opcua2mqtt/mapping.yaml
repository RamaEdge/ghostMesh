# GhostMesh OPC UA to MQTT Mapping Configuration
# Defines how OPC UA nodes map to MQTT topics

# OPC UA server configuration
opcua:
  endpoint: "opc.tcp://localhost:4840"
  security_policy: "Basic256Sha256"
  security_mode: "Sign"
  username: "edge"
  password: "edgepass"
  session_timeout: 60000
  connection_timeout: 10000
  reconnect_interval: 5000

# MQTT broker configuration
mqtt:
  host: "mosquitto"
  port: 1883
  username: "gateway"
  password: "gatewaypass"
  qos: 1
  retain_state: true
  keepalive: 60
  reconnect_interval: 5

# Node mappings from OPC UA to MQTT topics
mappings:
  # Press line A - Press01 asset
  - nodeId: "ns=2;s=Press01.Temperature"
    topic: "factory/A/press01/temperature"
    unit: "C"
    data_type: "float"
    description: "Press01 temperature sensor"
    
  - nodeId: "ns=2;s=Press01.Pressure"
    topic: "factory/A/press01/pressure"
    unit: "bar"
    data_type: "float"
    description: "Press01 pressure sensor"
    
  - nodeId: "ns=2;s=Press01.Vibration"
    topic: "factory/A/press01/vibration"
    unit: "mm/s"
    data_type: "float"
    description: "Press01 vibration sensor"
    
  - nodeId: "ns=2;s=Press01.Status"
    topic: "factory/A/press01/status"
    unit: ""
    data_type: "string"
    description: "Press01 operational status"

  # Press line A - Press02 asset
  - nodeId: "ns=2;s=Press02.Temperature"
    topic: "factory/A/press02/temperature"
    unit: "C"
    data_type: "float"
    description: "Press02 temperature sensor"
    
  - nodeId: "ns=2;s=Press02.Pressure"
    topic: "factory/A/press02/pressure"
    unit: "bar"
    data_type: "float"
    description: "Press02 pressure sensor"
    
  - nodeId: "ns=2;s=Press02.Vibration"
    topic: "factory/A/press02/vibration"
    unit: "mm/s"
    data_type: "float"
    description: "Press02 vibration sensor"
    
  - nodeId: "ns=2;s=Press02.Status"
    topic: "factory/A/press02/status"
    unit: ""
    data_type: "string"
    description: "Press02 operational status"

  # Conveyor line B - Conveyor01 asset
  - nodeId: "ns=2;s=Conveyor01.Speed"
    topic: "factory/B/conveyor01/speed"
    unit: "m/min"
    data_type: "float"
    description: "Conveyor01 speed sensor"
    
  - nodeId: "ns=2;s=Conveyor01.Load"
    topic: "factory/B/conveyor01/load"
    unit: "kg"
    data_type: "float"
    description: "Conveyor01 load sensor"
    
  - nodeId: "ns=2;s=Conveyor01.Status"
    topic: "factory/B/conveyor01/status"
    unit: ""
    data_type: "string"
    description: "Conveyor01 operational status"

# Global settings
settings:
  publish_interval: 1000  # milliseconds
  state_retention: 300    # seconds
  max_reconnect_attempts: 10
  log_level: "INFO"
